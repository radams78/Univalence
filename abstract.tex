\documentclass{easychair}
\bibliographystyle{plain}

\title{A Strongly Normalizing Computation Rule for the Univalence Axiom in Higher-Order Propositional Logic}
\author{Robin Adams\inst{1} \and Marc Bezem\inst{1} \and Thierry Coquard\inst{2}}
\institute{Universitetet i Bergen,
Bergen, Norway \\
\email{\{robin.adams,marc\}@uib.no}
\and
University of Gothenburg,
Gothenburg, Sweden \\
\email{coquand@chalmers.se}}

\usepackage{proof}
\usepackage{amssymb}

\newcommand{\vald}{\ \mathrm{valid}}
\newcommand{\univ}[4]{\mathsf{univ}_{{#1},{#2}} \left( {#3} , {#4} \right)}
\newcommand{\triplelambda}{\lambda \!\! \lambda \!\! \lambda}
\newcommand{\reff}[1]{\mathsf{ref} \left( {#1} \right)}

\begin{document}

\maketitle

Homotopy type theory offers the promise of a formal system for the univalent foundations of mathematics.  However, if
we simply add the univalence axiom to type theory, then we lose the property of canonicity --- that every term computes to
a normal form.  A computation becomes `stuck' when it reaches the point that it needs to evaluate a proof term
that is an application of the univalence axiom.  We wish to find a way to compute with the univalence axiom.

As a first step towards such a system, we present here a system of higher-order propositional logic,  with a universe $\Omega$ of propositions
closed under implication and quantification over any simple type over $\Omega$.  We add a type $a =_A b$ for any terms $a$, $b$ of type $A$
(this type is not a proposition in $\Omega$), and two ways to prove an equality: reflexivity, and the univalence axiom.  We present
reduction relations for this system, and prove the reduction confluent and strongly normalizing.

\section{Syntax and Rules of Deduction}

We call the following type theory predicative higher-order propositional logic.  Its syntax is given by the grammar

\[ \begin{array}{lrcl}
\text{Proof} & \delta & ::= & p \mid \delta \delta \mid \lambda p : \phi . \delta \\
\text{Term} & M, \phi & ::= & x \mid \bot \mid M M \mid \lambda x : A . M \mid \phi \supset \phi \\
\text{Type} & A & ::= & \Omega \mid A \rightarrow A \\
\text{Term Context} & \Gamma & ::= & \langle \rangle \mid \Gamma , x : A \\
\text{Proof Context} & \Delta & ::= & \langle \rangle \mid \Delta, p : \phi \\
\text{Judgement} & \mathcal{J} & ::= & \Gamma \vald \mid \Gamma \vdash M : A \mid \Gamma, \Delta \vald \mid \Gamma, \Delta \vdash \delta : \phi 
\end{array} \]

where $p$ is a \emph{proof variable} and $x$ a \emph{term variable}.  Its rules of deduction are

\[ \infer{\langle \rangle \vald}{} \qquad
\infer{\Gamma, x : A \vald}{\Gamma \vald} \qquad 
\infer{\Gamma, p : \phi \vald}{\Gamma \vdash \phi : \Omega} \]

\[ \infer[(x : A \in \Gamma)]{\Gamma \vdash x : A}{\Gamma \vald} \qquad
\infer[(p : \phi \in \Gamma)]{\Gamma \vdash p : \phi}{\Gamma \vald} \]

\[ \infer{\Gamma \vdash \bot : \Omega}{\Gamma \vald} \qquad
\infer{\Gamma \vdash \phi \rightarrow \psi : \Omega}{\Gamma \vdash \phi : \Omega \quad \Gamma \vdash \psi : \Omega} \]

\[ \infer{\Gamma \vdash M N : B} {\Gamma \vdash M : A \rightarrow B \quad \Gamma \vdash N : A} \qquad
\infer{\Gamma \vdash \delta \epsilon : \psi} {\Gamma \vdash \delta : \phi \rightarrow \psi \quad \Gamma \vdash \epsilon : \phi} \]

\[ \infer{\Gamma \vdash \lambda x:A.M : A \rightarrow B}{\Gamma, x : A \vdash M : B} \qquad
\infer{\Gamma \vdash \lambda p : \phi . \delta : \phi \rightarrow \psi}{\Gamma, p : \phi \vdash \delta : \psi} \]

\[ \infer[(\phi \simeq \phi)]{\Gamma \vdash \delta : \psi}{\Gamma \vdash \delta : \phi \quad \Gamma \vdash \psi : \Omega} \]

\subsection{Extensional Equality}

On top of this system, we add an extensional equality relation.  We extend the grammar with

\[
\begin{array}{lrcl}
\text{Equality Proof} & P & ::= & e \mid \reff{M} \mid P \supset P \mid \univ{\phi}{\phi}{\delta}{\delta} \mid \triplelambda e : x =_A x . P \mid P P\\
\text{Proof} & \delta & ::= & \cdots \mid P^+ \mid P^- \\
\text{Context} & \Gamma & ::= & \cdots \mid \Gamma, e : M =_A M \\
\text{Judgement} & \mathcal{J} & ::= & \cdots \mid \Gamma \vdash P : M =_A M
\end{array}
\]

Note that, in the equality proof $\triplelambda e : x =_A y . P$, the term variables $x$ and $y$ and the proof variable $e$ are all bound within $P$.

We add the following rules of deduction

\[ \infer{\Gamma, e : M =_A N \vald}{\Gamma \vdash M : A \quad \Gamma \vdash N : A}
\qquad
\infer[e : M =_A N \in \Gamma]{\Gamma \vdash e : M =_A N}{\Gamma \vald} \]

\[ \infer{\Gamma \vdash \reff{M} : M =_A M}{\Gamma \vdash M : A}
\qquad
\infer{\Gamma \vdash P \rightarrow Q : \phi \rightarrow \psi =_\Omega \phi' \rightarrow \psi´}{\Gamma \vdash P : \phi =_\Omega \phi´}{\Gamma \vdash Q : \psi =_\Omega \psi´} \]

\[ \infer{\Gamma \vdash \univ{\phi}{\psi}{\delta}{\epsilon} : \phi =_\Omega \psi}{\Gamma \vdash \delta : \phi \rightarrow \psi \quad \Gamma \vdash \epsilon : \psi \rightarrow \phi} 
\qquad
\infer{\Gamma \vdash P^+ : \phi \rightarrow \psi}{\Gamma \vdash P : \phi =_\Omega \psi}
\qquad
\infer{\Gamma \vdash P^- : \psi \rightarrow \phi}{\Gamma \vdash P : \psi =_\Omega \psi} \]

\[ \infer{\Gamma \vdash \triplelambda e : x =_A y . P : M =_{A \rightarrow B} N}{\Gamma \vdash M : A \rightarrow B \quad \Gamma \vdash N : A \rightarrow B \quad
\Gamma, x : A, y : A, e : x =_A y \vdash M x =_B N y}
\qquad
\infer{\Gamma \vdash PQ : MN =_B M' N'}{\Gamma \vdash P : M =_{A \rightarrow B} M' \quad \Gamma \vdash Q : N =_A N'} \]

\[ \infer[M \simeq_\beta M', N \simeq_\beta N']{\Gamma \vdash P : M' =_A N'}{\Gamma \vdash P : M =_A N \quad \Gamma \vdash M' : A \quad \Gamma \vdash N' : A} \]

\section{The Reduction Relation}

We define the following reduction relation on proofs and equality proofs.

\begin{gather*}
(\reff{\phi})^+ \rightsquigarrow \lambda x : \phi . x
\qquad
(\reff{\phi})^- \rightsquigarrow \lambda x : \phi . x
\qquad
\univ{\phi}{\psi}{\delta}{\epsilon}^+ \rightsquigarrow \delta
\qquad
\univ{\phi}{\psi}{\delta}{\epsilon}^- \rightsquigarrow \epsilon
\\
(\reff \phi \rightarrow \univ{\psi}{\chi}{\delta}{\epsilon}) \rightsquigarrow \univ{\phi \rightarrow \psi}{\phi \rightarrow \chi}{\lambda f : \phi \rightarrow \psi . \lambda x : \phi . \delta (f x)}{\lambda g : \phi \rightarrow \chi . \lambda x : \phi . \epsilon (g x)}
\\
(\univ{\phi}{\psi}{\delta}{\epsilon} \rightarrow \reff{\chi}) \rightsquigarrow \univ{\phi \rightarrow \chi}{\psi \rightarrow \chi}{\lambda f : \phi \rightarrow \chi. \lambda x : \psi . f (\epsilon x)}{\lambda g : \psi \rightarrow \chi . \lambda x : \phi . g (\delta x)}
\\
(\univ{\phi}{\psi}{\delta}{\epsilon} \rightarrow \univ{\phi'}{\psi'}{\delta'}{\epsilon'} \rightsquigarrow \univ{\phi \rightarrow \phi'}{\psi \rightarrow \psi'}
{\lambda f : \phi \rightarrow \phi' . \lambda x : \psi . \delta' (f (\epsilon x))}{\lambda g : \psi \rightarrow \psi' . \lambda y : \phi . \epsilon' (g (\delta y))}
\\
(\reff{\phi} \rightarrow \reff{\psi}) \rightsquigarrow \reff{\phi \rightarrow \psi}
\qquad
\reff{M} \reff{N} \rightsquigarrow \reff{MN}
\\
(\reff{\lambda x:A.M})P \rightsquigarrow \{ P / x \} M
\end{gather*}

\section{Proof of Strong Normalization}

\section{Future Work}

\end{document}